# n8n-demo

[ЁЯОе Watch Video](https://www.youtube.com/playlist?list=PLh6STJoQwVDvgByTQCbuRdlpG4LZ5vYOV)

## Bonus Example n8n Workflow: Web Content Processing with AI AND Create Chat Bot From Scraper

[English](#english) | [р╣Др╕Чр╕в](#thai)

---

## English

### ЁЯза Workflow 1: Web Content Processing & Discord AI Summary & Broadcast LINE

#### Overview
This n8n workflow automates the process of extracting important content from multiple web pages and processing it with AI assistance. The workflow is designed to scrape content from various positions (URLs), extract key information, and use AI to analyze and rearrange the content before sending it to Discord.

#### Components

1. **Schedule Trigger**  
   - Triggers the workflow on a defined interval (e.g., hourly)

2. **Web Content Extraction (Positions 1-5)**  
   - HTTP Request nodes scrape different sources  
   - "Find Importance" extracts highlights  
   - "HTML to MARK" converts to Markdown

3. **Data Pipeline**  
   - Merge content from all sources  
   - Format data using Edit Fields & Code node

4. **AI Integration**  
   - AI Agent with Ollama Chat Model  
   - Rearranges message based on AI analysis

5. **Output to Discord**  
   - Sends messages via Discord webhook  
   - Loop Over Items supported
   
6. **Insert into Vector DB**
   - Delete all rows in Postgres PGVector Store first
   - Send message to save in Postgres PGVector Store
   - Notify in the morning in the group chat to inform that there is a new update

#### Setup Instructions

- Add Line API
- Configure 5 URLs to monitor
- Install Ollama and your chat model
- Set up Discord Webhook URL
- Adjust schedule trigger as needed

#### Use Cases

- News aggregation
- Research monitoring
- Content summarization
- Competitive analysis

---

### ЁЯдЦ Workflow 2: AI Q&A via LINE with Vector Store

#### Overview
This workflow adds a conversational AI system that connects to a LINE Messaging API, searches a vector database (PGVector), and responds with intelligent answers via LINE.

#### Components

1. **Webhook (LINE)**  
   - Accepts messages from LINE users

2. **AI Agent**  
   - Google Gemini Chat Model  
   - Uses Postgres Chat Memory  
   - Tools: Calculator + Vector Search

3. **Vector Retrieval Tool**  
   - Retrieves relevant data from PGVector store  
   - Embeddings generated by Ollama

4. **Postgres PGVector Store**  
   - Stores document vectors

5. **LINE API Reply**  
   - Sends AI response using `replyToken` to user

#### Setup Instructions

- Connect LINE bot to n8n Webhook
- Generate embeddings with Ollama and insert into PGVector
- Configure Gemini API Key
- Reply via HTTP Request using LINE API

#### Use Cases

- Document-based Q&A
- Helpdesk chatbot
- Internal knowledge assistant via LINE

---

## р╣Др╕Чр╕в

### ЁЯза Workflow 1: р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╣Ар╕зр╣Зр╕Ър╣Бр╕ер╕░р╕кр╕гр╕╕р╕Ыр╕Фр╣Йр╕зр╕в AI р╕кр╣Ир╕Зр╣Др╕Ы Discord р╣Бр╕ер╕░ Broadcast LINE

#### р╕ар╕▓р╕Юр╕гр╕зр╕б
Workflow р╕Щр╕╡р╣Йр╕Ир╕░р╕Кр╣Ир╕зр╕вр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕лр╕ер╕▓р╕вр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М, р╕кр╕Бр╕▒р╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Н, р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕Фр╣Йр╕зр╕в AI р╣Бр╕ер╕░р╕кр╣Ир╕Зр╣Др╕Ыр╕вр╕▒р╕З Discord р╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ р╣Ар╕лр╕бр╕▓р╕░р╕Бр╕▒р╕Ър╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Вр╣Ир╕▓р╕з р╕Бр╕▓р╕гр╕Др╕▒р╕Фр╕Бр╕гр╕нр╕Зр╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓ р╣Бр╕ер╕░р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░

#### р╕кр╣Ир╕зр╕Щр╕Ыр╕гр╕░р╕Бр╕нр╕Ъ

1. **Schedule Trigger (р╕Хр╕▒р╕зр╕Бр╕│р╕лр╕Щр╕Фр╣Ар╕зр╕ер╕▓)**  
   - р╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓р╣Гр╕лр╣Й workflow р╕Чр╕│р╕Зр╕▓р╕Щр╕Хр╕▓р╕бр╕Кр╣Ир╕зр╕Зр╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф

2. **р╕Бр╕▓р╕гр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕зр╣Зр╕Ъ (р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╕Чр╕╡р╣И 1-5)**  
   - HTTP Request р╣Др╕Ыр╕вр╕▒р╕Зр╣Бр╕Хр╣Ир╕ер╕░р╣Бр╕лр╕ер╣Ир╕З  
   - Find Importance р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕Др╕▒р╕Н  
   - HTML to MARK р╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щ Markdown

3. **р╕Бр╕гр╕░р╕Ър╕зр╕Щр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Вр╣Йр╕нр╕бр╕╣р╕е**  
   - Merge р╕гр╕зр╕бр╕Вр╣Йр╕нр╕бр╕╣р╕е  
   - Edit Fields + Code р╣Бр╕Бр╣Йр╣Др╕В/р╣Бр╕Ыр╕ер╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е

4. **AI Integration**  
   - р╣Гр╕Кр╣Й AI Agent р╕Бр╕▒р╕Ъ Ollama Chat Model  
   - р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Бр╕ер╕░р╕Ир╕▒р╕Фр╣Ар╕гр╕╡р╕вр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Гр╕лр╕бр╣И

5. **Output р╣Др╕Ыр╕вр╕▒р╕З Discord**  
   - р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Ыр╕вр╕▒р╕З Discord р╕Фр╣Йр╕зр╕в Webhook  
   - р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕лр╕ер╕▓р╕вр╕гр╕▓р╕вр╕Бр╕▓р╕г (Loop Over Items)

6. **Insert р╕ер╕З Vector DB**  
   - р╕ер╕Ър╕Чр╕╕р╕Б Row р╣Гр╕Щ Postgres PGVector Store р╕Бр╣Ир╕нр╕Щ
   - р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Ыр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕ер╕З Postgres PGVector Store
   - р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Ар╕Вр╣Йр╕▓р╣Др╕Ыр╣Гр╕Щр╕Бр╕ер╕╕р╣Ир╕б р╣Бр╕Кр╕Ч р╣Ар╕Юр╕╖р╣Ир╕нр╕Ър╕нр╕Бр╕зр╣Ир╕▓р╕бр╕╡р╕Бр╕▓р╕г Update р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И

#### р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓

- р╣Ар╕Юр╕┤р╣Ир╕б Line API
- р╣Ар╕Юр╕┤р╣Ир╕б URL р╕Вр╕нр╕Зр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣Мр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г 5 р╣Бр╕лр╣Ир╕З
- р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Ollama р╣Бр╕ер╕░р╣Вр╕лр╕ер╕Фр╣Вр╕бр╣Ар╕Фр╕е Chat
- р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Discord Webhook
- р╕Хр╕▒р╣Йр╕Зр╣Ар╕зр╕ер╕▓ Schedule Trigger

#### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Ир╕▓р╕з
- р╕кр╕гр╕╕р╕Ыр╕Ър╕Чр╕Др╕зр╕▓р╕бр╕Зр╕▓р╕Щр╕зр╕┤р╕Ир╕▒р╕в
- р╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╕Др╕╣р╣Ир╣Бр╕Вр╣Ир╕З
- р╣Бр╕Кр╕гр╣Мр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

---

### ЁЯдЦ Workflow 2: р╕гр╕░р╕Ър╕Ър╕Цр╕▓р╕бр╕Хр╕нр╕Ъ AI р╕Ьр╣Ир╕▓р╕Щ LINE р╕Фр╣Йр╕зр╕вр╕Рр╕▓р╕Щр╕Др╕зр╕▓р╕бр╕гр╕╣р╣Йр╣Ар╕зр╕Бр╣Ар╕Хр╕нр╕гр╣М

#### р╕ар╕▓р╕Юр╕гр╕зр╕б
Workflow р╕Щр╕╡р╣Йр╣Гр╕лр╣Йр╕Др╕╕р╕Ур╕кр╕гр╣Йр╕▓р╕Зр╕гр╕░р╕Ър╕Ъ AI р╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕бр╕Ьр╣Ир╕▓р╕Щ LINE р╣Вр╕Фр╕вр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Бр╕Рр╕▓р╕Щр╕Др╕зр╕▓р╕бр╕гр╕╣р╣Йр╕Чр╕╡р╣Ир╣Ар╕Бр╣Зр╕Ър╣Бр╕Ър╕Ър╣Ар╕зр╕Бр╣Ар╕Хр╕нр╕гр╣М (PGVector) р╕Юр╕гр╣Йр╕нр╕б AI Agent р╕Чр╕╡р╣Ир╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Др╕│р╕Цр╕▓р╕бр╕Ър╕гр╕┤р╕Ър╕Чр╣Др╕Фр╣Й

#### р╕кр╣Ир╕зр╕Щр╕Ыр╕гр╕░р╕Бр╕нр╕Ъ

1. **Webhook (LINE)**  
   - р╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й LINE

2. **AI Agent**  
   - р╣Гр╕Кр╣Й Google Gemini Chat Model  
   - р╕бр╕╡ Memory р╕Фр╣Йр╕зр╕в Postgres Chat Memory  
   - р╣Гр╕Кр╣Йр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н Calculator + Vector Search

3. **Vector Search Tool**  
   - р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕Зр╕Ир╕▓р╕Б PGVector  
   - Embeddings р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Фр╕в Ollama

4. **PGVector Store**  
   - р╕Ир╕▒р╕Фр╣Ар╕Бр╣Зр╕Ър╣Ар╕зр╕Бр╣Ар╕Хр╕нр╕гр╣Мр╕Вр╕нр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Др╕зр╕▓р╕бр╕гр╕╣р╣Й

5. **Callback LINE API**  
   - р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Бр╕ер╕▒р╕Ър╕лр╕▓р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й LINE р╕Фр╣Йр╕зр╕в `replyToken`

#### р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓

- р╣Ар╕Кр╕╖р╣Ир╕нр╕б Webhook р╕Ир╕▓р╕Б LINE р╣Др╕Ыр╕вр╕▒р╕З n8n
- р╕кр╕гр╣Йр╕▓р╕З embedding р╕Ир╕▓р╕Бр╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓р╕Фр╣Йр╕зр╕в Ollama р╣Бр╕ер╣Йр╕зр╣Гр╕кр╣Ир╣Гр╕Щ PGVector
- р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ API Key р╕Вр╕нр╕З Gemini
- р╕кр╣Ир╕Зр╕Др╕│р╕Хр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щ HTTP Request р╣Др╕Ыр╕вр╕▒р╕З LINE API

#### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

- Chatbot р╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕бр╕Ир╕▓р╕Бр╣Ар╕нр╕Бр╕кр╕▓р╕г
- р╕гр╕░р╕Ър╕Ър╕Кр╣Ир╕зр╕вр╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕ар╕▓р╕вр╣Гр╕Щр╕нр╕Зр╕Др╣Мр╕Бр╕г
- LINE assistant chatbot

---

> ЁЯТб р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕: р╕Др╕╕р╕Ур╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Ыр╕гр╕▒р╕Ъ Workflow р╕Щр╕╡р╣Йр╣Гр╕лр╣Йр╕Чр╕│р╕Зр╕▓р╕Щр╕гр╣Ир╕зр╕бр╕Бр╕▒р╕Ъ Telegram, Slack р╕лр╕гр╕╖р╕н Web UI Chatbot р╣Др╕Фр╣Йр╕Зр╣Ир╕▓р╕в р╣Ж р╣Вр╕Фр╕вр╣Бр╕Др╣Ир╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ Webhook р╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Хр╕нр╕Ър╕Бр╕ер╕▒р╕Ъ